<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>CHA Monitoring · CounterTools</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">CounterTools</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Getting Started</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../monitors/">Monitors</a></li><li><a class="tocitem" href="../../records/">Record</a></li><li><a class="tocitem" href="../../counters/">Counter Resources</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../core/example/">Core Monitoring Example</a></li><li><a class="tocitem" href="../imc/">Integrated Memory Controller (iMC) Monitoring Example</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>CHA Monitoring</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>CHA Monitoring</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/hildebrandmw/CounterTools.jl/blob/master/docs/src/uncore/cha.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="CHA-Monitoring-1"><a class="docs-heading-anchor" href="#CHA-Monitoring-1">CHA Monitoring</a><a class="docs-heading-anchor-permalink" href="#CHA-Monitoring-1" title="Permalink"></a></h1><p>With the Skylake and newer Intel XEON chips, each core on the has: a slice of the total LLC, a &quot;Caching Home Agent (CHA), and a Snoop Filter. Addresses are assigned to exactly one of these slice/CHA/SF &quot;boxes&quot;. Normal addresses requests are first checked to see if they are in the LLC, then the Snoop Filter is checked. Remember that the LLC on Xeon systems is non-inclusive with the L2 cache on the processors. The Snoop Filter is responsible for checking whether or not data is in these caches. If data is not in the LLC or SF, then the CHA is responsible for fetching the data, usually from memory via the iMC [1].</p><p>Intel includes a set of performance counters in each of these boxes.</p><h2 id="Determining-the-available-CHAs-1"><a class="docs-heading-anchor" href="#Determining-the-available-CHAs-1">Determining the available CHAs</a><a class="docs-heading-anchor-permalink" href="#Determining-the-available-CHAs-1" title="Permalink"></a></h2><p>For the current generation of Xeon chips, there can be up to 28 CHAs on each socket. However, not all of these are in use is the number of cores is fewer.</p><h3 id="Finding-PCI-Bus-address-1"><a class="docs-heading-anchor" href="#Finding-PCI-Bus-address-1">Finding PCI Bus address</a><a class="docs-heading-anchor-permalink" href="#Finding-PCI-Bus-address-1" title="Permalink"></a></h3><p>References:</p><p>[1]: https://software.intel.com/en-us/forums/software-tuning-performance-optimization-platform-monitoring/topic/820002</p></article></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 27 March 2020 17:24">Friday 27 March 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
